{% extends "base.html" %}
{% block title %}{{ site_name }}{% endblock %}

{% block content %}
<section class="hero">
  <div>
    <h1>Big ideas in small boxes</h1>
    <p>Pocket-sized games built around clever, focused mechanics.</p>
    <div>
      <a class="btn primary" href="{{ url_for('games_index') }}">Browse games</a>
      <a class="btn" href="{{ url_for('blog_index') }}">Read the updates</a>
    </div>
  </div>

  {% if featured %}
    <div class="card">
      <div>
        <div>Featured</div>
        <h2><a href="{{ url_for('game_detail', slug=featured.slug) }}">{{ featured.title }}</a></h2>
        <p class="muted">{{ featured.tagline }}</p>
      </div>

      {% if featured.hero_image %}
      <img src="{{ featured.hero_image }}" alt="{{ featured.title }} hero image">
      {% endif %}

      <div>
        <div>
          {% if featured.players %}<span>{{ featured.players }} players</span>{% endif %}
          {% if featured.playtime %}<span>{{ featured.playtime }}</span>{% endif %}
          {% if featured.age %}<span>{{ featured.age }}</span>{% endif %}
        </div>

        {% set game = featured %}
        {% include "components/kickstarter_card.html" %}
        <a class="btn primary" href="{{ url_for('game_detail', slug=featured.slug) }}">View game page</a>
      </div>
    </div>
  {% endif %}
</section>

<section class="grid">
  <div>
    <h2>Games</h2>
    <a class="muted" href="{{ url_for('games_index') }}">See all →</a>
  </div>

  <div>
    {% for g in games %}
      <a class="card" href="{{ url_for('game_detail', slug=g.slug) }}">
        <div>{{ g.title }}</div>
        <div>{{ g.tagline }}</div>
        <div>
          {% if g.players %}<span>{{ g.players }} players</span>{% endif %}
          {% if g.playtime %}<span>{{ g.playtime }}</span>{% endif %}
        </div>
      </a>
    {% endfor %}
  </div>
</section>

<section class="section">
  <div>
    <h2>Latest Updates</h2>
    <a class="muted" href="{{ url_for('blog_index') }}">All posts →</a>
  </div>
  {% if posts %}
    <div>
      {% for p in posts %}
        <a href="{{ url_for('blog_post', slug=p.slug) }}">
          <div>
            <div>{{ p.title }}</div>
            <div class="muted">{% if p.date %}{{ p.date }}{% else %}—{% endif %}</div>
          </div>
          <div class="muted">Read →</div>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <p class="muted">No posts yet. (The trolls are still writing.)</p>
  {% endif %}
</section>
{% endblock %}
